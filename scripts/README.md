# PROWINE é€²éšåœ–ç‰‡çˆ¬èŸ²ç³»çµ±

## ğŸ“‹ æ¦‚è¿°

é€™æ˜¯ä¸€å€‹å¼·å¤§çš„åœ–ç‰‡çˆ¬èŸ²ç³»çµ±ï¼Œå°ˆé–€ç”¨æ–¼è‡ªå‹•ç²å–ï¼š
- ğŸ· **é…’æ¬¾é…’æ¨™ç…§ç‰‡**ï¼ˆçœŸæ­£çš„é…’æ¨™ï¼Œä¸æ˜¯é…’ç“¶ç…§ç‰‡ï¼‰
- ğŸ° **é…’èŠå®˜æ–¹LOGO**ï¼ˆçœŸæ­£çš„å®˜æ–¹LOGOï¼‰
- ğŸ“¸ **é…’èŠçœŸå¯¦ç…§ç‰‡**ï¼ˆé«˜å“è³ªçš„å°ˆæ¥­ç…§ç‰‡ï¼‰

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å®‰è£ä¾è³´

```bash
npm install cheerio node-fetch @types/node
```

### 2. è¨­ç½®ç’°å¢ƒè®Šæ•¸

ç¢ºä¿ `.env.local` åŒ…å«ï¼š

```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
```

### 3. é‹è¡Œçˆ¬èŸ²

#### çˆ¬å–æ‰€æœ‰é…’æ¬¾é…’æ¨™ç…§ç‰‡
```bash
npm run scrape:wines
```

#### çˆ¬å–æ‰€æœ‰é…’èŠLOGOå’Œç…§ç‰‡
```bash
npm run scrape:wineries
```

#### çˆ¬å–æ‰€æœ‰åœ–ç‰‡ï¼ˆé…’æ¬¾+é…’èŠï¼‰
```bash
npm run scrape:images
```

## ğŸ¯ åŠŸèƒ½ç‰¹é»

### 1. å¤šä¾†æºçˆ¬å–
- âœ… **å®˜æ–¹ç¶²ç«™**ï¼ˆæœ€é«˜å„ªå…ˆç´šï¼‰
- âœ… **Wine-Searcher**
- âœ… **Vivino**ï¼ˆè¨ˆåŠƒä¸­ï¼‰
- âœ… **Google Images**ï¼ˆå‚™ç”¨ï¼‰

### 2. æ™ºèƒ½é©—è­‰
- âœ… è‡ªå‹•é©—è­‰åœ–ç‰‡URLæœ‰æ•ˆæ€§
- âœ… æª¢æŸ¥åœ–ç‰‡æ ¼å¼å’Œå°ºå¯¸
- âœ… è©•åˆ†ç³»çµ±ï¼ˆ0-100åˆ†ï¼‰
- âœ… ä¾†æºå„ªå…ˆç´šæ’åº

### 3. è‡ªå‹•æ›´æ–°
- âœ… è‡ªå‹•æ›´æ–° Supabase æ•¸æ“šåº«
- âœ… ä¿ç•™åŸæœ‰åœ–ç‰‡ï¼ˆå¦‚æœæ–°åœ–ç‰‡å“è³ªæ›´å¥½æ‰æ›´æ–°ï¼‰
- âœ… è©³ç´°çš„æ—¥èªŒè¨˜éŒ„

### 4. é˜²çˆ¬èŸ²è™•ç†
- âœ… è«‹æ±‚é–“éš”æ§åˆ¶
- âœ… é‡è©¦æ©Ÿåˆ¶
- âœ… User-Agent å½è£
- âœ… è¶…æ™‚æ§åˆ¶

## ğŸ“ æ–‡ä»¶çµæ§‹

```
scripts/
â”œâ”€â”€ advanced-image-scraper.ts  # æ ¸å¿ƒçˆ¬èŸ²ç³»çµ±
â”œâ”€â”€ scrape-wines.ts            # é…’æ¬¾çˆ¬èŸ²è…³æœ¬
â”œâ”€â”€ scrape-wineries.ts         # é…’èŠçˆ¬èŸ²è…³æœ¬
â”œâ”€â”€ create-demo-users.ts       # å‰µå»ºæ¸¬è©¦ç”¨æˆ¶è…³æœ¬
â”œâ”€â”€ fetch-contact-info.ts      # ç²å–è¯ç¹«ä¿¡æ¯è…³æœ¬
â”œâ”€â”€ setup-admin.sql            # ç®¡ç†å“¡è¨­ç½® SQL è…³æœ¬
â””â”€â”€ README.md                  # æœ¬èªªæ˜æ–‡æª”
```

**æ³¨æ„ï¼š** å·²æ¸…ç†èˆŠç‰ˆå’Œé‡è¤‡çš„è…³æœ¬æ–‡ä»¶ã€‚

## ğŸ”§ é…ç½®é¸é …

åœ¨ `advanced-image-scraper.ts` ä¸­å¯ä»¥èª¿æ•´ï¼š

```typescript
const CONFIG = {
  requestDelay: 2000,      // è«‹æ±‚é–“éš”ï¼ˆæ¯«ç§’ï¼‰
  maxRetries: 3,           // æœ€å¤§é‡è©¦æ¬¡æ•¸
  timeout: 30000,          // è«‹æ±‚è¶…æ™‚ï¼ˆæ¯«ç§’ï¼‰
  userAgent: "...",        // User-Agent
};
```

## ğŸ“Š åœ–ç‰‡é©—è­‰æ¨™æº–

### é…’æ¨™ç…§ç‰‡
- âœ… URLæ ¼å¼æœ‰æ•ˆ
- âœ… åœ–ç‰‡å¯è¨ªå•
- âœ… æ ¼å¼ç‚º JPG/PNG
- âœ… å°ºå¯¸è‡³å°‘ 800x800px
- âœ… URLåŒ…å«ç›¸é—œé—œéµå­—ï¼ˆlabel, bottle, wineï¼‰

### é…’èŠLOGO
- âœ… URLæ ¼å¼æœ‰æ•ˆ
- âœ… åœ–ç‰‡å¯è¨ªå•
- âœ… æ ¼å¼ç‚º PNG/SVGï¼ˆé€æ˜èƒŒæ™¯ï¼‰
- âœ… å°ºå¯¸è‡³å°‘ 400x400px
- âœ… URLåŒ…å«ç›¸é—œé—œéµå­—ï¼ˆlogo, brand, emblemï¼‰

### é…’èŠç…§ç‰‡
- âœ… URLæ ¼å¼æœ‰æ•ˆ
- âœ… åœ–ç‰‡å¯è¨ªå•
- âœ… æ ¼å¼ç‚º JPG
- âœ… å°ºå¯¸è‡³å°‘ 1920x1080px
- âœ… URLåŒ…å«ç›¸é—œé—œéµå­—ï¼ˆwinery, vineyard, chateauï¼‰

## ğŸ¨ ä½¿ç”¨ç¤ºä¾‹

### è™•ç†å–®å€‹é…’æ¬¾

```typescript
import { processWine } from './advanced-image-scraper';

const wine = {
  id: 'wine_xxx',
  nameZh: 'é”é‡Œå¥§æ–¯é”é‡Œçƒæ–¯äºŒä¸– 2021',
  nameEn: 'Darioush Darius II 2021',
  slug: 'darioush-darius-ii-2021',
  wineryId: 'winery_darioush',
  wineryNameZh: 'é”é‡Œå¥§æ–¯é…’èŠ',
  wineryNameEn: 'Darioush',
  wineryWebsite: 'https://www.darioush.com',
};

await processWine(wine);
```

### è™•ç†å–®å€‹é…’èŠ

```typescript
import { processWinery } from './advanced-image-scraper';

const winery = {
  id: 'winery_xxx',
  nameZh: 'é”é‡Œå¥§æ–¯é…’èŠ',
  nameEn: 'Darioush',
  slug: 'darioush',
  website: 'https://www.darioush.com',
};

await processWinery(winery);
```

## âš ï¸ æ³¨æ„äº‹é …

1. **éµå®ˆç¶²ç«™æ¢æ¬¾**
   - éµå®ˆç›®æ¨™ç¶²ç«™çš„ `robots.txt`
   - ä¸è¦éåº¦è«‹æ±‚ï¼ˆå·²è¨­ç½®è«‹æ±‚é–“éš”ï¼‰
   - å°Šé‡ç‰ˆæ¬Š

2. **åœ–ç‰‡å“è³ª**
   - ç³»çµ±æœƒè‡ªå‹•é¸æ“‡æœ€ä½³åœ–ç‰‡
   - å¦‚æœæ‰¾ä¸åˆ°åˆé©çš„åœ–ç‰‡ï¼Œæœƒä¿ç•™åŸæœ‰åœ–ç‰‡
   - å¯ä»¥æ‰‹å‹•æª¢æŸ¥å’Œæ›´æ–°

3. **éŒ¯èª¤è™•ç†**
   - æ‰€æœ‰éŒ¯èª¤éƒ½æœƒè¨˜éŒ„åœ¨æ—¥èªŒä¸­
   - å–®å€‹é …ç›®å¤±æ•—ä¸æœƒå½±éŸ¿å…¶ä»–é …ç›®
   - å¯ä»¥é‡æ–°é‹è¡Œè…³æœ¬ç¹¼çºŒè™•ç†

## ğŸ” èª¿è©¦

### æŸ¥çœ‹è©³ç´°æ—¥èªŒ
è…³æœ¬æœƒè¼¸å‡ºè©³ç´°çš„è™•ç†æ—¥èªŒï¼ŒåŒ…æ‹¬ï¼š
- âœ… æ‰¾åˆ°çš„åœ–ç‰‡URL
- âœ… é©—è­‰çµæœå’Œåˆ†æ•¸
- âœ… æ›´æ–°ç‹€æ…‹

### æ‰‹å‹•é©—è­‰åœ–ç‰‡
```typescript
import { validateImageUrl } from './advanced-image-scraper';

const result = await validateImageUrl(
  'https://example.com/wine-label.jpg',
  'label'
);

console.log(result);
// {
//   isValid: true,
//   score: 85,
//   reasons: ['URLæ ¼å¼æœ‰æ•ˆ', 'åœ–ç‰‡å¯è¨ªå•', ...]
// }
```

## ğŸ“ˆ æœªä¾†æ”¹é€²

- [ ] æ”¯æŒ Vivino API
- [ ] æ”¯æŒ Google Images API
- [ ] åœ–ç‰‡ä¸‹è¼‰å’Œä¸Šå‚³åˆ° Supabase Storage
- [ ] åœ–ç‰‡å£“ç¸®å’Œå„ªåŒ–
- [ ] æ‰¹é‡è™•ç†æ¨¡å¼
- [ ] Web UI ç•Œé¢

## ğŸ“ æ›´æ–°æ—¥èªŒ

### v1.0.0 (2024-11-27)
- âœ… åˆå§‹ç‰ˆæœ¬
- âœ… æ”¯æŒå®˜æ–¹ç¶²ç«™çˆ¬å–
- âœ… æ”¯æŒ Wine-Searcher æœç´¢
- âœ… åœ–ç‰‡é©—è­‰ç³»çµ±
- âœ… è‡ªå‹•æ•¸æ“šåº«æ›´æ–°

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è¨±å¯è­‰

ISC

