# PROWINE 數據爬蟲規範

**目的：** 確保從 PROWINE.COM.TW 爬蟲的所有酒款和酒莊數據符合高品質標準

**生效日期：** 2024-11-27

---

## 📋 數據完整性要求

### 1. 酒款數據要求

#### 必須包含的欄位：
- ✅ **基本資訊**
  - `nameZh` (中文名稱) - 必填
  - `nameEn` (英文名稱) - 必填
  - `slug` (URL slug) - 必填，唯一
  - `vintage` (年份) - 必填
  - `region` (產區) - 必填
  - `country` (國家) - 必填
  - `category` (類別) - 必填

- ✅ **圖片要求**
  - `mainImageUrl` - **必須是真正的酒標照片**（不是酒瓶照片）
  - `images` - 多張高解析度酒標照片（至少1張，建議3-5張）
  - 圖片規格：
    - 最小尺寸：800x800px
    - 格式：JPG/PNG
    - 必須清晰顯示酒標文字和設計
    - 背景：白色或透明

- ✅ **評分資訊** (`ratings` JSONB)
  - `decanter` - Decanter 評分 (0-100)
  - `jamesSuckling` - James Suckling 評分 (0-100)
  - `robertParker` - Robert Parker 評分 (0-100)
  - `wineSpectator` - Wine Spectator 評分 (0-100)
  - `wineEnthusiast` - Wine Enthusiast 評分 (0-100)
  - **至少包含1個有公信力的評分**

- ✅ **品酒筆記** (`tastingNotes` JSONB)
  - `color` - 色澤描述
  - `aroma` - 香氣描述
  - `palate` - 口感描述
  - `finish` - 餘韻描述

- ✅ **餐酒搭配** (`foodPairing` JSONB)
  - `chinese` - 中餐搭配建議（數組，至少3個）
  - `western` - 西餐搭配建議（數組，至少3個）

- ✅ **文案要求**
  - `descriptionZh` - 中文描述（至少200字）
  - `descriptionEn` - 英文描述（至少200字）
  - `storyZh` - 中文故事（可選，建議有）
  - `storyEn` - 英文故事（可選，建議有）

- ✅ **其他資訊**
  - `price` - 價格（必填）
  - `alcoholContent` - 酒精濃度（必填）
  - `servingTemp` - 適飲溫度（必填）
  - `grapeVarieties` - 葡萄品種（數組）

---

### 2. 酒莊數據要求

#### 必須包含的欄位：
- ✅ **基本資訊**
  - `nameZh` (中文名稱) - 必填
  - `nameEn` (英文名稱) - 必填
  - `slug` (URL slug) - 必填，唯一
  - `region` (產區) - 必填
  - `country` (國家) - 必填
  - `website` (官方網站) - 必填

- ✅ **LOGO要求**
  - `logoUrl` - **必須是真正的官方LOGO**
  - 圖片規格：
    - 最小尺寸：400x400px
    - 格式：PNG（透明背景）或 SVG
    - 必須清晰，無模糊
    - 必須是官方版本，不是自行設計

- ✅ **圖片要求**
  - `images` - 多張酒莊照片（至少3張）
  - 圖片類型：
    - 酒莊建築外觀
    - 酒莊內部（酒窖、釀酒設備）
    - 葡萄園
    - 品酒室
  - 圖片規格：
    - 最小尺寸：1920x1080px
    - 格式：JPG
    - 高解析度，專業攝影

- ✅ **文案要求**
  - `descriptionZh` - 中文描述（至少300字）
  - `descriptionEn` - 英文描述（至少300字）
  - `storyZh` - 中文故事（至少500字）
  - `storyEn` - 英文故事（至少500字）
  - 必須包含：
    - 酒莊歷史
    - 釀酒哲學
    - 風土特色
    - 代表酒款

---

## 🔍 數據來源優先級

### 1. 酒款數據來源
1. **官方網站** - 最高優先級
   - 酒莊官方網站
   - 酒款專屬頁面
   - 官方發布的圖片和資訊

2. **權威評分平台**
   - Wine Spectator
   - Robert Parker's Wine Advocate
   - James Suckling
   - Decanter
   - Wine Enthusiast

3. **專業酒類數據庫**
   - Wine-Searcher
   - Vivino
   - CellarTracker

4. **PROWINE.COM.TW**
   - 作為補充來源
   - 必須驗證資訊準確性

### 2. 酒莊數據來源
1. **官方網站** - 最高優先級
   - 酒莊官方網站
   - 官方LOGO下載頁面
   - 官方圖片庫

2. **官方社交媒體**
   - Facebook 官方頁面
   - Instagram 官方帳號
   - LinkedIn 官方頁面

3. **權威媒體報導**
   - 專業酒類雜誌
   - 新聞報導
   - 專訪文章

---

## 🖼️ 圖片獲取規範

### 1. 酒款酒標照片
- **來源：** 官方網站、Wine-Searcher、Vivino
- **要求：**
  - 必須清晰顯示完整酒標
  - 必須是正面照片（不是側面或角度）
  - 背景必須是白色或透明
  - 解析度至少 800x800px
  - 不能是酒瓶照片（只顯示酒瓶，看不到酒標）

### 2. 酒莊LOGO
- **來源：** 官方網站、品牌指南、媒體資料包
- **要求：**
  - 必須是官方版本
  - 透明背景 PNG 或 SVG
  - 解析度至少 400x400px
  - 不能自行設計或修改

### 3. 酒莊照片
- **來源：** 官方網站、官方社交媒體、專業攝影
- **要求：**
  - 高解析度（至少 1920x1080px）
  - 專業攝影品質
  - 多角度展示（外觀、內部、葡萄園）
  - 不能使用低品質或模糊照片

---

## ✅ 數據驗證檢查清單

### 酒款驗證
- [ ] 酒標照片是真正的酒標（不是酒瓶照片）
- [ ] 至少1個有公信力的評分
- [ ] 中餐搭配建議至少3個
- [ ] 西餐搭配建議至少3個
- [ ] 品酒筆記完整（色澤、香氣、口感、餘韻）
- [ ] 中文描述至少200字
- [ ] 英文描述至少200字
- [ ] 所有必填欄位都有值

### 酒莊驗證
- [ ] LOGO是真正的官方LOGO
- [ ] 至少3張高品質酒莊照片
- [ ] 中文描述至少300字
- [ ] 英文描述至少300字
- [ ] 中文故事至少500字
- [ ] 英文故事至少500字
- [ ] 所有必填欄位都有值

---

## 🔧 技術實現

### 圖片處理
1. **驗證圖片URL**
   - 使用 `processImageUrl` 函數
   - 自動驗證URL有效性
   - 自動fallback到可靠圖片源

2. **圖片存儲**
   - 優先使用官方URL（如果穩定）
   - 或上傳到 Supabase Storage
   - 確保CDN加速

### 數據存儲
1. **JSONB欄位格式**
   ```json
   {
     "ratings": {
       "decanter": 95,
       "jamesSuckling": 93,
       "robertParker": 94
     },
     "foodPairing": {
       "chinese": ["紅燒肉", "北京烤鴨", "東坡肉"],
       "western": ["牛排", "烤羊排", "義大利麵"]
     },
     "tastingNotes": {
       "color": "深紫紅色",
       "aroma": "黑莓、黑醋栗、雪松",
       "palate": "濃郁豐滿，單寧細緻",
       "finish": "餘韻悠長"
     }
   }
   ```

---

## 📝 爬蟲流程

### 步驟1：數據收集
1. 從 PROWINE.COM.TW 獲取基本資訊
2. 驗證資訊準確性
3. 補充缺失資訊

### 步驟2：圖片獲取
1. 從官方網站獲取酒標照片
2. 從官方網站獲取酒莊LOGO
3. 從官方網站獲取酒莊照片
4. 驗證圖片品質

### 步驟3：評分獲取
1. 查詢權威評分平台
2. 獲取多個評分（至少1個）
3. 驗證評分來源

### 步驟4：搭配建議
1. 查詢專業餐酒搭配指南
2. 獲取中餐搭配建議（至少3個）
3. 獲取西餐搭配建議（至少3個）

### 步驟5：數據驗證
1. 檢查所有必填欄位
2. 驗證圖片品質
3. 驗證文案完整性
4. 驗證評分和搭配建議

### 步驟6：數據入庫
1. 更新 Supabase 數據庫
2. 驗證數據正確性
3. 測試頁面顯示

---

## 🚨 禁止事項

- ❌ 使用假的或自行設計的LOGO
- ❌ 使用酒瓶照片代替酒標照片
- ❌ 使用低品質或模糊圖片
- ❌ 缺少評分資訊
- ❌ 缺少搭配建議
- ❌ 文案不完整（少於要求字數）
- ❌ 使用未驗證的資訊來源

---

## 📊 品質標準

### 最低標準
- 所有必填欄位都有值
- 至少1張可用的圖片/LOGO
- 至少1個評分
- 至少3個搭配建議

### 理想標準
- 所有欄位都有完整值
- 多張高品質圖片
- 多個權威評分（3個以上）
- 完整的品酒筆記
- 豐富的搭配建議（各5個以上）
- 詳細的文案（超過最低要求）

---

**記住：** 品質永遠比數量重要。寧可少一些數據，也要確保每個數據都是高品質的！

